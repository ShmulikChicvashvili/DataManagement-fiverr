<!DOCTYPE html>
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>

</head>
<body>
	<form action="servlet/Register" method="post" id="registrationForm">

		Username:<input type="text" name="username" /><br />
		<br /> Name:<input type="text" name="name" /><br />
		<br /> password:<input type="password" name="password" /><br />
		<br />
		<br />
		<br /> 
		<input type="submit" value="submit">
		
	</form>
	<div id="resultDiv"></div>
	<script>
			$(document).bind('ajaxSuccess',function(event,request,settings){
				if (request.getResponseHeader('NEED_REDIRECT') == 'true'){
					window.location.replace = '/HW5/index.jsp';
				};
			});
            /* attach a submit handler to the form */
            $("#registrationForm").submit(function(event) {
                /* stop form from submitting normally */
                event.preventDefault();

                /* get some values from elements on the page: */
                var $form = $(this),
                    username = $form.find('input[name="username"]').val(),
					name = $form.find('input[name="name"]').val(),
					password = $form.find('input[name="password"]').val(),
                    url = $form.attr('action');
                /* Send the data using post */
                var posting = $.post(url,{username:username, name:name, password:password});

                /* Put the results in a div */
                posting.done(function(data) {
					
                    $("#resultDiv").empty().append(data);
                });
            });
	</script>
</body>
</html>
